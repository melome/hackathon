<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <title>CatPic & Fact</title>
  </head>
  <body class="main">
    <div>
        <h1>Wanna know facts about my species?</h1>
        <div class="d-grid gap-2 col-6 mx-auto">
            <button onclick="myFunction()" id=meow class="btn btn-outline-info">Click Here. Meow!</button>
        </div>
        <div class="card catpic" style="width: 18rem;">
            <img class="card-img-top" id="catpic" alt="cute cat">  <!--cat photo preview-->
            <div class="card-body">
                <p class="card-text" id="fact"></p> <!--Random cat facts here-->
            </div>
        </div>
    </div>

    <script>
        function myFunction() {
            let img = document.querySelector(".card-img-top")
            let p = document.querySelector(".card-text")
            fetch('https://api.thecatapi.com/v1/images/search') //fetching data from TheCatAPI
                .then(
                    function(response) {
                    if (response.status !== 200) {
                        console.log('Sorry, Try again'); //Error Message
                        return;
                    }
                    response.json().then(function(data) {
                        // console.log(data[0].url)
                        img.setAttribute('src', data[0].url) // Random cat pic from API 
                    });                    
                }
                )
                .catch(function(err) {
                    console.log('Fetch Error :-S', err);
                });

            fetch('https://cat-fact.herokuapp.com/facts')
                .then(
                    function(response) {
                    if (response.status !== 200) {
                        console.log('Sorry, Try again');
                        return;
                        
                    }
                    console.log(response);
                    response.json().then(function(datax) {
                        console.log(datax)
                    });
                    
                    //document.getElementById(".card-text").innerHTML = fact;
                }
                )
                .catch(function(err) {
                    console.log('Fetch Error :-S', err);
                });
        }
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="./index.js"></script>
  </body>
</html>